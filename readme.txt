Принцип работы - на страницах сайта размещается код из example.js, где-нибудь на сервере папка с основным кодом. При посещении страниц посетитель отпраавляет запрос к ipinfo.php, получает ответ в виде вычисленных на бэке значений, и пробрасывает значения из ответа в параметры визитов. Бэк работает на SypexGeo + можно указать токен от ipgeolocation.io для определения провайдера.

1) В example.js заменить metrika_id на номер своего счётчика (если не указано - подхватится автоматом)
2) Там же скорректировать путь до ipinfo.php
3) Обновить базу https://sypexgeo.net/ru/download/
4) Опционально подвесить автообновление по cron
5) В ipinfo.php можно включить проброс ISP посетителей, указав токен от ipgeolocation.io. Либо получать на фронте, установив var search_isp = true;
6) Там же можно включить создание блокировок по ISP (сбор; для включения блокировок нужно скопировать проверку из block_by_isp.php в .htaccess в корне сайта)
